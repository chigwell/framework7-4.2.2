(function framework7ComponentLoader(o,t){void 0===t&&(t=!0);document,window;var n=o.$,e=(o.Template7,o.utils),a=(o.device,o.support,o.Class,o.Modal),i=(o.ConstructorMethods,o.ModalMethods),r=function(o){function t(t,a){var i=e.extend({on:{}},t.params.actions,a);o.call(this,t,i);var r,s,c,l=this;if(l.params=i,l.params.buttons&&(r=l.params.buttons,Array.isArray(r[0])||(r=[r])),l.groups=r,l.params.el?s=n(l.params.el):l.params.content?s=n(l.params.content):l.params.buttons&&(l.params.convertToPopover&&(l.popoverHtml=l.renderPopover()),l.actionsHtml=l.render()),s&&s.length>0&&s[0].f7Modal)return s[0].f7Modal;if(s&&0===s.length&&!l.actionsHtml&&!l.popoverHtml)return l.destroy();l.params.backdrop&&0===(c=t.root.children(".actions-backdrop")).length&&(c=n('<div class="actions-backdrop"></div>'),t.root.append(c));var p,d=l.open,u=l.close;function v(o){var t,e;if(n(this).hasClass("list-button")?(t=n(this).parents("li").index(),e=n(this).parents(".list").index()):(t=n(this).index(),e=n(this).parents(".actions-group").index()),void 0!==r){var a=r[e][t];a.onClick&&a.onClick(l,o),l.params.onClick&&l.params.onClick(l,o),!1!==a.close&&l.close()}}function m(o){var t=o.target;0===n(t).closest(l.el).length&&(l.params.closeByBackdropClick&&l.params.backdrop&&l.backdropEl&&l.backdropEl===t?l.close():l.params.closeByOutsideClick&&l.close())}return l.open=function(o){var a=!1,i=l.params,r=i.targetEl,s=i.targetX,c=i.targetY,u=i.targetWidth,m=i.targetHeight;return l.params.convertToPopover&&(r||void 0!==s&&void 0!==c)&&(l.params.forceToPopover||t.device.ios&&t.device.ipad||t.width>=768||t.device.desktop&&"aurora"===t.theme)&&(a=!0),a&&l.popoverHtml?((p=t.popover.create({content:l.popoverHtml,backdrop:l.params.backdrop,targetEl:r,targetX:s,targetY:c,targetWidth:u,targetHeight:m})).open(o),p.once("popoverOpened",function(){p.$el.find(".list-button").each(function(o,t){n(t).on("click",v)})}),p.once("popoverClosed",function(){p.$el.find(".list-button").each(function(o,t){n(t).off("click",v)}),e.nextTick(function(){p.destroy(),p=void 0})})):(l.$el=l.actionsHtml?n(l.actionsHtml):l.$el,l.$el[0].f7Modal=l,l.groups&&(l.$el.find(".actions-button").each(function(o,t){n(t).on("click",v)}),l.once("actionsClosed",function(){l.$el.find(".actions-button").each(function(o,t){n(t).off("click",v)})})),l.el=l.$el[0],d.call(l,o)),l},l.close=function(o){return p?p.close(o):u.call(l,o),l},e.extend(l,{app:t,$el:s,el:s?s[0]:void 0,$backdropEl:c,backdropEl:c&&c[0],type:"actions"}),l.on("opened",function(){(l.params.closeByBackdropClick||l.params.closeByOutsideClick)&&t.on("click",m)}),l.on("close",function(){(l.params.closeByBackdropClick||l.params.closeByOutsideClick)&&t.off("click",m)}),s&&(s[0].f7Modal=l),l}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.render=function(){if(this.params.render)return this.params.render.call(this,this);var o=this.groups;return('\n      <div class="actions-modal'+(this.params.grid?" actions-grid":"")+'">\n        '+o.map(function(o){return'<div class="actions-group">\n            '+o.map(function(o){var t=["actions-"+(o.label?"label":"button")],n=o.color,e=o.bg,a=o.bold,i=o.disabled,r=o.label,s=o.text,c=o.icon;return n&&t.push("color-"+n),e&&t.push("bg-color-"+e),a&&t.push("actions-button-bold"),i&&t.push("disabled"),r?'<div class="'+t.join(" ")+'">'+s+"</div>":('\n                <div class="'+t.join(" ")+'">\n                  '+(c?'<div class="actions-button-media">'+c+"</div>":"")+'\n                  <div class="actions-button-text">'+s+"</div>\n                </div>").trim()}).join("")+"\n          </div>"}).join("")+"\n      </div>\n    ").trim()},t.prototype.renderPopover=function(){return this.params.renderPopover?this.params.renderPopover.call(this,this):('\n      <div class="popover popover-from-actions">\n        <div class="popover-inner">\n          '+this.groups.map(function(o){return'\n            <div class="list">\n              <ul>\n                '+o.map(function(o){var t=[],n=o.color,e=o.bg,a=o.bold,i=o.disabled,r=o.label,s=o.text,c=o.icon;return n&&t.push("color-"+n),e&&t.push("bg-color-"+e),a&&t.push("popover-from-actions-bold"),i&&t.push("disabled"),r?(t.push("popover-from-actions-label"),'<li class="'+t.join(" ")+'">'+s+"</li>"):c?(t.push("item-link item-content"),'\n                      <li>\n                        <a class="'+t.join(" ")+'">\n                          <div class="item-media">\n                            '+c+'\n                          </div>\n                          <div class="item-inner">\n                            <div class="item-title">\n                              '+s+"\n                            </div>\n                          </div>\n                        </a>\n                      </li>\n                    "):(t.push("list-button"),'\n                    <li>\n                      <a href="#" class="'+t.join(" ")+'">'+s+"</a>\n                    </li>\n                  ")}).join("")+"\n              </ul>\n            </div>\n          "}).join("")+"\n        </div>\n      </div>\n    ").trim()},t}(a),s={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,closeByBackdropClick:!0,render:null,renderPopover:null,backdrop:!0}},static:{Actions:r},create:function(){this.actions=i({app:this,constructor:r,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(o,t){void 0===t&&(t={});this.actions.open(t.actions,t.animate)},".actions-close":function(o,t){void 0===t&&(t={});this.actions.close(t.actions,t.animate)}}};if(t){if(o.prototype.modules&&o.prototype.modules[s.name])return;o.use(s),o.instance&&(o.instance.useModuleParams(s,o.instance.params),o.instance.useModule(s))}return s}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
